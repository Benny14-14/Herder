<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Herder Nacht 2025 - Musikwunsch</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    iframe {
      border-radius: 0.5rem;
    }
  </style>
  <script>
    function handlePreview() {
      const link = document.getElementById('link').value.trim();
      const preview = document.getElementById('preview');
      if (link.includes('youtube') || link.includes('youtu.be')) {
        let videoId = null;
        if (link.includes('v=')) {
          videoId = link.split('v=')[1].split('&')[0];
        } else if (link.includes('youtu.be')) {
          videoId = link.split('youtu.be/')[1].split('?')[0];
        }
        if (videoId) {
          preview.innerHTML = `<iframe width="100%" height="180" src="https://www.youtube.com/embed/${videoId}" allowfullscreen></iframe>`;
          return;
        }
      } else if (link.includes('spotify')) {
        const embedUrl = link.replace('/track/', '/embed/track/');
        preview.innerHTML = `<iframe src="${embedUrl}" width="100%" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>`;
        return;
      }
      preview.innerHTML = '';
    }

    function handleSubmit(event) {
      event.preventDefault();
      const title = document.getElementById('songTitle').value.trim();
      const artist = document.getElementById('artist').value.trim();
      const link = document.getElementById('link').value.trim();
      const reason = document.getElementById('reason').value.trim();
      if (!title || !artist) {
        alert('Bitte Songtitel und KÃ¼nstler angeben.');
        return;
      }
      alert(`Danke fÃ¼r deinen Wunsch:\n${title} â€“ ${artist}\n${link ? 'Link: ' + link : ''}\n${reason ? 'Grund: ' + reason : ''}`);
      // SpÃ¤ter: Firebase speichern
      document.getElementById('wishForm').reset();
      document.getElementById('preview').innerHTML = '';
    }
  </script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">
  <div class="bg-white rounded-lg shadow-lg p-6 max-w-md w-full">
    <h1 class="text-3xl font-bold mb-6 text-center">ðŸŽ¶ Musikwunsch Herder Nacht 2025</h1>
    <form id="wishForm" onsubmit="handleSubmit(event)" class="space-y-4">
      <div>
        <label for="songTitle" class="block font-semibold mb-1">Songtitel *</label>
        <input type="text" id="songTitle" placeholder="z. B. Blinding Lights" required
               class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
      </div>
      <div>
        <label for="artist" class="block font-semibold mb-1">KÃ¼nstler:in *</label>
        <input type="text" id="artist" placeholder="z. B. The Weeknd" required
               class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
      </div>
      <div>
        <label for="link" class="block font-semibold mb-1">YouTube-/Spotify-Link (optional)</label>
        <input type="url" id="link" placeholder="https://..." oninput="handlePreview()"
               class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
      </div>
      <div>
        <label for="reason" class="block font-semibold mb-1">Warum dieser Song? (optional)</label>
        <textarea id="reason" rows="3" placeholder="z. B. Stimmung, Insider, Klassenhit..."
                  class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
      </div>
      <div id="preview" class="mb-4"></div>
      <button type="submit" class="w-full bg-green-600 text-white py-3 rounded hover:bg-green-700 transition">Absenden</button>
    </form>
  </div>
</body>
</html>
